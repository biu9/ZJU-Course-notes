# 优先队列(priority queue)

### 定义

---

​	在优先队列中，队列中的数据被赋予了优先级。当访问元素时，优先级最高的会先被删除。所以说优先队列是最高级数据先出。

​	优先队列是能支持以下两种操作的数据结构：

- 删除最小or最大元素
- 插入一个元素

### 优先队列的实现

---

#### 堆的定义

​	当一颗完全二叉树的每个结点都大于等于（小于等于）它的两个子结点时，它被称为堆。

![image-20211026161800554](C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20211026161800554.png)

#### 实现方法

---

1、删除一个元素

- 将优先级最高（即数组第一个元素）与数组最后一个元素进行交换。数组大小减一。

- 将放在第一个的元素和左右孩子中较大的那一个进行比较，如果优先级低于孩子，则交换二者的位置。一直进行此操作直到抵达数组末尾或者优先级不低于孩子为止。（即下沉操作）

  时间复杂度是O(log n)

![](C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20211026162251797.png)

2、插入一个元素

- 如果队列大小已达到上限，则将队列容量翻倍。否则进行步骤b。

- 队列大小加一，将新元素插入到数组最后的位置。

- 将新元素和其逻辑上的父亲节点进行优先级比较，如果新元素的优先级比父亲节点高，则交换两者的位置。一直比较下去（最多logN次比较），直到父节点比新元素优先级高或者已经到达二叉树的顶端。（即上浮操作）

  时间复杂度是O(log n)

  ![image-20211026163623932](C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20211026163623932.png)

#### 将二叉树调整为堆

---

![image-20211026170510432](C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20211026170510432.png)

时间复杂度是O(N)

